<ngx-ui-loader [loaderId]="'loader-01'"></ngx-ui-loader>

<div class="mx-3 mt-4">
  <h3 class="text-purple font-weight-bold">Enviar e-mail</h3>

  <form [formGroup]="formComunicacao">
    <div class="row w-100">
      <div class="col-12 d-flex align-items-center">
        <input
          formControlName="sendToAll"
          type="checkbox"
          id="espaco-ativo"
          (click)="setSentToAll()"
        />

        <label id="label-input-toogle" for="espaco-ativo"></label>

        <label for="espaco-ativo" class="ms-1 text-gray label-input-toogle"
          >Enviar e-mail para todos os clientes</label
        >
      </div>

      <div class="col-12 mt-2" *ngIf="showClientes">
        <app-input-select-option
          [formGroup]="formComunicacao"
          [controlName]="'cliente'"
          [label]="'Destinátários'"
          [items]="emailClietesToSelect"
          (emitterChange)="adicionarCliente()"
        ></app-input-select-option>

        <div>
          <app-btn-chip
            *ngFor="let e of emailClienteToSend"
            [text]="e"
            (emitterClick)="removerEmail(e)"
          ></app-btn-chip>
        </div>
      </div>

      <div class="col-12 my-2">
        <app-input-text
          [formGroup]="formComunicacao"
          [controlName]="'assunto'"
          [label]="'Assunto'"
          [placeholder]="'Asssunto do e-mail'"
        ></app-input-text>
      </div>

      <div class="col-12">
        <p class="text-gray mb-1">Mensagem</p>
        <div class="editor">
          <ngx-editor-menu [editor]="editor" [toolbar]="toolbar">
          </ngx-editor-menu>
          <ngx-editor
            formControlName="mensagem"
            [editor]="editor"
            [placeholder]="'Conteúdo do e-mail'"
          ></ngx-editor>
        </div>
      </div>

      <div class="d-flex mt-3">
        <app-btn-purple
          [textButton]="'Enviar'"
          [showIcon]="true"
          [icone]="faSendEmail"
          (emmiterClick)="enviarEmail()"
        ></app-btn-purple>
      </div>
    </div>
  </form>
</div>
